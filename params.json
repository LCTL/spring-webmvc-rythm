{"name":"Spring-webmvc-rythm","tagline":"Rythm Template Engine for Spring","body":"# Rythm Template Engine for Spring Web\r\n\r\nThis is a plugin for Spring to adapt Rythm template engine. \r\nRythm template engine is a high performance templates engine which is multiple times faster than groovy, velocity and freemarker.\r\n\r\nRythm template engine source: [https://github.com/greenlaw110/Rythm] (https://github.com/greenlaw110/Rythm)\r\n\r\nRythm template engine tutorial: [http://play-rythm-demo.appspot.com/] (http://play-rythm-demo.appspot.com/)\r\n\r\n## Dependencies:\r\n\r\n* Rythm 1.0-b9 or above\r\n* Servlet 2.5 or above\r\n* Spring web-mvc 3.1.0 or above\r\n* Slf4j 1.6.6 or above\r\n\r\n## Integrate with Spring Web\r\n\r\n### Maven:\r\n\r\n```\r\n<dependency>\r\n    <groupId>com.ctlok</groupId>\r\n    <artifactId>spring-webmvc-rythm</artifactId>\r\n    <version>1.3.6</version>\r\n</dependency>\r\n```\r\n\r\n### Java Project:\r\n\r\n1. Download latest release: <http://search.maven.org/remotecontent?filepath=com/ctlok/spring-webmvc-rythm/1.3.6/spring-webmvc-rythm-1.3.6.jar>\r\n2. Download Spring Framework with web mvc: <http://projects.spring.io/spring-framework/>\r\n3. Download Slf4j: <http://www.slf4j.org/>\r\n4. Download logback: <http://logback.qos.ch/download.html>\r\n\r\n### Spring config example\r\n\r\n```\r\n<bean id=\"rythmConfigurator\" class=\"com.ctlok.springframework.web.servlet.view.rythm.RythmConfigurator\">\r\n    <property name=\"mode\" value=\"dev\" />\r\n    <property name=\"rootDirectory\" value=\"/WEB-INF/views/\" />\r\n</bean>\r\n\r\n<bean id=\"rythmViewResolver\" class=\"com.ctlok.springframework.web.servlet.view.rythm.RythmViewResolver\">\r\n    <constructor-arg>\r\n        <ref bean=\"rythmConfigurator\" />\r\n    </constructor-arg>\r\n    <property name=\"prefix\" value=\"/WEB-INF/views/\" />\r\n    <property name=\"suffix\" value=\".html\" />\r\n</bean>\r\n```\r\n\r\n## Support Spring Internationalization (I18N)\r\n\r\n```\r\n<bean class=\"org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter\" />\r\n    \r\n<bean class=\"org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping\">\r\n    <property name=\"interceptors\">\r\n        <ref bean=\"localeChangeInterceptor\" />\r\n    </property>\r\n</bean>\r\n\r\n<bean id=\"messageSource\" class=\"org.springframework.context.support.ResourceBundleMessageSource\">\r\n    <property name=\"basename\" value=\"language/messages\" />\r\n    <property name=\"defaultEncoding\" value=\"UTF-8\" />\r\n</bean>\r\n\r\n<bean id=\"localeResolver\" class=\"org.springframework.web.servlet.i18n.CookieLocaleResolver\">\r\n    <property name=\"defaultLocale\" value=\"en\" />\r\n    <property name=\"cookieName\" value=\"locale\" />\r\n    <property name=\"cookieMaxAge\" value=\"31536000\" />\r\n</bean>\r\n\r\n<bean id=\"localeChangeInterceptor\" class=\"org.springframework.web.servlet.i18n.LocaleChangeInterceptor\">\r\n    <property name=\"paramName\" value=\"lang\" />\r\n</bean>\r\n```\r\n\r\n***\r\n\r\n`@message` tag help you to get current locale message in template: \r\n\r\n```\r\n<p>@message(\"message.code\")</p>\r\n<p>@message(\"message.code\", \"arg0\", \"arg1\")</p>\r\n<p>@message({code: \"message.code.null\", default: \"Output me if code not found\"})</p>\r\n<p>@message({code: \"message.code.null\", default: \"Output me if code not found\", \"arg0\", \"arg1\"})</p>\r\n<p>@message({code: \"message.code\", locale: \"fr\"})</p>\r\n<p>@message({code: \"message.code\", locale: \"fr\", \"arg0\", \"arg1\"})</p>\r\n<p>@message({code: \"message.code\", default: \"Output me if code not found\", locale: \"fr\"})</p>\r\n<p>@message({code: \"message.code\", default: \"Output me if code not found\", locale: \"fr\", \"arg0\", \"arg1\"})</p>\r\n```\r\n\r\n## Support Spring cache in template\r\n\r\n```\r\n<bean id=\"cacheManagerFactory\" class=\"org.springframework.cache.ehcache.EhCacheManagerFactoryBean\">\r\n    <property name=\"configLocation\" value=\"classpath:ehcache.xml\" />\r\n</bean>\r\n\r\n<bean id=\"cacheManager\" class=\"org.springframework.cache.ehcache.EhCacheCacheManager\">\r\n    <property name=\"cacheManager\" ref=\"cacheManagerFactory\" />\r\n</bean>\r\n\r\n<bean id=\"rythmConfigurator\" class=\"com.ctlok.springframework.web.servlet.view.rythm.RythmConfigurator\">\r\n    <property name=\"mode\" value=\"dev\" />\r\n    <property name=\"rootDirectory\" value=\"/WEB-INF/views/\" />\r\n    <property name=\"tagRootDirectory\" value=\"/WEB-INF/views/tags/\" />\r\n    <property name=\"cacheInProductionModeOnly\" value=\"false\" />\r\n    <property name=\"cacheManager\" ref=\"cacheManager\" />\r\n    <property name=\"springCacheName\" value=\"RYTHM_CACHE\" />\r\n</bean>\r\n```\r\n\r\nehcache.xml:\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<ehcache>\r\n\r\n    <diskStore path=\"java.io.tmpdir\" />\r\n    \r\n    <defaultCache \r\n        maxElementsInMemory=\"300\" eternal=\"false\" timeToIdleSeconds=\"500\"\r\n        timeToLiveSeconds=\"500\" overflowToDisk=\"true\" />\r\n        \r\n    <cache name=\"RYTHM_CACHE\" maxElementsInMemory=\"300\" eternal=\"false\" timeToIdleSeconds=\"500\"\r\n        timeToLiveSeconds=\"3600\" overflowToDisk=\"false\" />\r\n        \r\n</ehcache>\r\n```\r\n\r\nHow to use cache in Rythm template: [http://play-rythm-demo.appspot.com/demo/testcache] (http://play-rythm-demo.appspot.com/demo/testcache)\r\n\r\n## Support Spring Security (Optional)\r\n\r\nDependencies:\r\n\r\n* Spring Security Core 3.1.0 or above\r\n\r\n```\r\n<authentication-manager>\r\n    <authentication-provider>\r\n        <user-service>\r\n            <user name=\"admin\" password=\"admin\" authorities=\"ROLE_ADMIN, ROLE_USER\" />\r\n            <user name=\"user\" password=\"user\" authorities=\"ROLE_USER\" />\r\n            <user name=\"anonymous\" password=\"anonymous\" authorities=\"ROLE_ANONYMOUS\" />\r\n        </user-service>\r\n    </authentication-provider>\r\n</authentication-manager> \r\n```\r\n\r\n***\r\n\r\n`@secured` tag help you to check current user is it has role and display content:\r\n\r\n```\r\n@secured(\"ROLE_ADMIN\"){\r\n    admin content\r\n}\r\n\r\n@secured(\"ROLE_USER\"){\r\n    user content\r\n}\r\n\r\n@secured(\"ROLE_USER\", \"ROLE_ANONYMOUS\"){\r\n    anonymous content\r\n}\r\n```\r\n\r\n## Build in Tag\r\n\r\nUse `@url` tag to add context path before resource path:\r\n\r\n```\r\n<script type=\"text/javascript\" src=\"@url(\"/javascripts/jQuery.min.js\")\"></script>\r\n\r\nResult: <script type=\"text/javascript\" src=\"my-app/javascripts/jQuery.min.js\"></script>\r\n```\r\n\r\n\r\nUse `@fullUrl` tag to print current server full URL path with resource:\r\n\r\n```\r\n<img src=\"@fullUrl(\"/images/xyz.png\")\" />\r\n\r\nResult: <img src=\"http://pro.ctlok.com/images/xyz.png\" />\r\n```\r\n\r\nUse `@dateFormat` tag to print formatted date string:\r\n\r\n```\r\n@dateFormat(user.getCreateDate(), format: \"dd-MM-yyyy HH:mm\")\r\n\r\nResult: 22-09-2013 14:28\r\n```\r\n\r\nUse `@cookieValue` tag to print cookie or assign to variable:\r\n\r\n```\r\n@cookieValue(\"mode\").assign(\"mode\")\r\n```\r\n\r\n## Custom Tag\r\n\r\nspring-webmvc-rythm support 2 type custom tag.\r\n\r\n### Java Based Tag\r\n\r\n1. Create class inherit from org.rythmengine.template.JavaTagBase\r\n2. Override `__getName()` method and return your tag name\r\n3. Implement `call(__ParameterList params, __Body body)`\r\n4. Config com.ctlok.springframework.web.servlet.view.rythm.RythmConfigurator\r\n\r\n```\r\n<bean id=\"rythmConfigurator\" class=\"com.ctlok.springframework.web.servlet.view.rythm.RythmConfigurator\">\r\n    <property name=\"mode\" value=\"dev\" />\r\n    <property name=\"rootDirectory\" value=\"/WEB-INF/views/\" />\r\n    <property name=\"tags\">\r\n        <list>\r\n            <bean class=\"com.xyz.tags.HelloWorld\" />\r\n        </list>\r\n    </property>\r\n</bean>\r\n```\r\n\r\n### File Based Tag\r\n\r\n1. Create template file\r\n2. Add template file to classpath\r\n3. Config com.ctlok.springframework.web.servlet.view.rythm.RythmConfigurator\r\n\r\n```\r\n<bean id=\"rythmConfigurator\" class=\"com.ctlok.springframework.web.servlet.view.rythm.RythmConfigurator\">\r\n    <property name=\"mode\" value=\"dev\" />\r\n    <property name=\"rootDirectory\" value=\"/WEB-INF/views/\" />\r\n    <property name=\"fileBasedTags\">\r\n        <list>\r\n            <bean class=\"com.ctlok.springframework.web.servlet.view.rythm.tag.FileBasedTag\">\r\n                <property name=\"resource\" value=\"classpath:custom_tags/helloWorld.html\" />\r\n                <property name=\"tagName\" value=\"helloWorld\" />\r\n            </bean>\r\n        </list>\r\n    </property>\r\n</bean>\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}